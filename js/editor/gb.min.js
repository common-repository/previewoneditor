console.log("mch gb.js load.");var __scrollPosition=0,__myIframe=null,__childWin=null,__targetWinName=null,__testURL=null,__thisWindow=window;__thisWindow.onblur=function(){console.log("__thisWindow.onblur .... ");__thisWindow.focus()};
jQuery(function(a){function b(){if(null===__myIframe)return!0;if(null===__childWin||null===__childWin.document.location)console.log("searchWindow..."),__childWin=window.open("",__targetWinName+"");if("\u30d7\u30ec\u30d3\u30e5\u30fc\u3092\u751f\u6210\u4e2d..."===__childWin.document.title)return setTimeout(function(){console.log("reloadMyPreview. \u30d7\u30ec\u30d3\u30e5\u30fc\u3092\u751f\u6210\u4e2d...");__thisWindow.focus();b()},100),!0;__thisWindow.focus();console.log(__thisWindow.focus());console.log(__childWin);
console.log(__childWin.document.location.href);console.log(__childWin.document.title);var a=__childWin.document.location.href;console.log(__childWin.location.href);"about:blank"===a?setTimeout(function(){console.log("reloadMyPreview.re.reload.src="+a);b()},100):(console.log("reloadMyPreview.src="+a),console.log("reloadMyPreview.__testURL="+__testURL),a=__testURL+"&preview=true",__myIframe.attr("src",""),__myIframe.attr("src",a))}a(document).on("click",".editor-post-preview",function(){console.log(".editor-post-preview click !!!!");
setTimeout(function(){b()})})});
wp.domReady(function(){var a=$(".editor-post-preview.is-button");console.log("$postPreview="+a.length);console.log("444444444444444444");console.log("wp.domReady window.name="+window.name);a=$("#post-preview");a=$(".editor-post-preview");if(1!==a.length)console.log("btn not found. $editorBtn.length="+a.length);else{a=a[0];console.log(a);console.log("self.$postPreviewBtn.attr('href')="+$(a).attr("href"));var b=$(a).attr("href");__targetWinName=$(a).attr("target");console.log("__targetWinName="+__targetWinName);
__testURL=b;a=$("<div/>").attr("id","mch-poe-preview-container").append($("<iframe/>").attr("id","preview-on-editor-iframe").attr("src",b)).append('<div id="mch-poe-bottom"><span id="mch-poe-reload-btn" class="button">Reload</span><span id="mch-poe-pre-h-tag-btn" class="button">Pre H</span><span id="mch-poe-next-h-tag-btn" class="button">Next H</span></div>');$("#wpbody-content").after(a);__myIframe=$("#preview-on-editor-iframe");console.log(__myIframe);__myIframe.on("load",function(){var a=$(__myIframe)[0].contentWindow;
a.rtprScrollTo(__scrollPosition);a.rtprScrollCallBack(function(a){__scrollPosition=a})});$("#mch-poe-reload-btn").on("click",function(a){console.log("#mch-poe-reload-btn btn click");console.log(wp.editor);console.log(wp.editor.TableOfContents());console.log(wp.editor.content.getContent());console.log(wp.editor.getContent())});$("#mch-poe-next-h-tag-btn").on("click",function(){$(__myIframe)[0].contentWindow.poeNextHeadlineTag()});$("#mch-poe-pre-h-tag-btn").on("click",function(){$(__myIframe)[0].contentWindow.poePreHeadlineTag()})}});
console.log("@@@@@@@@@@@@@@@@@@@@@@@ 222222");wp.hooks.addFilter("editor.interstitialMessage",function(){console.log("uuuuuuuuuuuuu");return wp.element.createElement("div",{className:"my-custom-message"},wp.element.createElement("p",null,"Post preview is being generated! \ud83d\udc83"))});
