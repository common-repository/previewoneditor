jQuery(function(b){var f={myIframe:null,scrollPosition:0,$postPreviewBtn:null,childWin:null,targetWinName:"",init:function(){this.addViewer()},addViewer:function(){var a=this;a.$postPreviewBtn=b("#post-preview");var c=a.$postPreviewBtn.attr("href");void 0!==c&&(a.targetWinName=a.$postPreviewBtn.attr("target"),a.$postPreviewBtn.on("click",function(d){setTimeout(function(){a.reloadMyPreview()},500)}),c.split("?"),c=b("<div/>").attr("id","mch-poe-preview-container").append(b("<iframe/>").attr("id","preview-on-editor-iframe").attr("src",
c).css({height:"calc(100% - 35px)",width:"99%","min-height":"calc(100% - 35px)"})).append('<div id="mch-poe-bottom"><span id="mch-poe-reload-btn" class="button">Reload</span><span id="mch-poe-pre-h-tag-btn" class="button">Pre H</span><span id="mch-poe-next-h-tag-btn" class="button">Next H</span></div>'),b("#wpbody-content .wrap").addClass("mch-main-editor-area"),b("#wpbody-content").after(c),a.myIframe=b("#preview-on-editor-iframe"),a.myIframe.on("load",function(){var d=b(a.myIframe)[0].contentWindow;
d.rtprScrollTo(a.scrollPosition);d.rtprScrollCallBack(function(e){a.scrollPosition=e});b("#preview-on-editor-iframe").css({height:"calc(100% - 35px)",width:"99%","min-height":"calc(100% - 35px)"})}),b("#mch-poe-reload-btn").on("click",function(d){a.$postPreviewBtn.click()}),b("#mch-poe-next-h-tag-btn").on("click",function(){b(a.myIframe)[0].contentWindow.poeNextHeadlineTag()}),b("#mch-poe-pre-h-tag-btn").on("click",function(){b(a.myIframe)[0].contentWindow.poePreHeadlineTag()}))},reloadMyPreview:function(){var a=
this;if(null===a.myIframe)return!0;if(null===a.childWin||null===a.childWin.document.location)a.childWin=window.open("",a.targetWinName);var c=a.childWin.document.location.href;"about:blank"===c?setTimeout(function(){a.reloadMyPreview()},800):(a.myIframe.attr("src",""),a.myIframe.attr("src",c),b("#preview-on-editor-iframe").css({height:"calc(100% - 35px)",width:"99%","min-height":"calc(100% - 35px)"}))}};b(document).ready(function(){f.init()})});
